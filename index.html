<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Sinais Aviator VIP</title>

  <!-- Manifesto para PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">

  <style>
    :root{
      --bg:#000000;
      --card:#111214;
      --text:#f1f1f1;
      --pink:#ff4fa3;
      --purple:#9d4dff;
      --btn:#a8ff00;
    }
    body{
      margin:0;
      font-family:Inter, sans-serif;
      background:var(--bg);
      color:var(--text);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      min-height:100vh;
      padding:0 20px 20px;
    }
    h1{
      margin:100px 0 20px;
      font-weight:700;
      font-size:1.8rem;
      color:var(--text);
    }
    .top-banner{
      position:sticky;
      top:0;
      width:100%;
      background:var(--btn);
      color:#000;
      font-weight:700;
      text-align:center;
      padding:14px;
      font-size:1.05rem;
      z-index:1000;
    }
    .top-banner a{
      color:#000;
      text-decoration:none;
      font-weight:800;
    }
    .top-banner a:hover{
      text-decoration:underline;
    }
    #createAccountBtn{
      background:var(--btn);
      color:#000;
      border:none;
      padding:14px 30px; /* largura aumentada */
      border-radius:6px;
      font-weight:700;
      cursor:pointer;
      margin-bottom:20px;
    }
    .signals-container{
      width:100%;
      max-width:500px;
      margin-bottom:30px;
    }
    .signals{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(80px,1fr));
      gap:12px;
    }
    .signal{
      background:var(--card);
      padding:15px;
      text-align:center;
      border-radius:8px;
      font-weight:600;
      font-size:1.2rem;
    }
    .pink{color:var(--pink);}
    .purple{color:var(--purple);}
    .vip-form{
      background:#111214;
      padding:20px;
      border-radius:8px;
      max-width:500px;
      width:100%;
      text-align:center;
    }
    .vip-form h2{
      color:#f1f1f1;
      margin-bottom:15px;
    }
    .vip-form p{
      color:#f1f1f1;
      margin-bottom:10px;
    }
    .vip-form .price{
      color:#a8ff00;
      font-weight:700;
      font-size:1.3rem;
      margin-bottom:20px;
    }
    .vip-form input{
      width:100%;
      padding:10px;
      margin-bottom:12px;
      border-radius:6px;
      border:none;
    }
    .vip-form button{
      width:100%;
      background:#a8ff00;
      color:#000;
      font-weight:700;
      padding:12px;
      border:none;
      border-radius:6px;
      cursor:pointer;
    }
    .vip-form small{
      color:#f1f1f1;
      margin-top:15px;
      font-size:0.85rem;
      display:block;
    }
  </style>
</head>
<body>

<div class="top-banner">
⚠️ Crie uma nova conta. Se já tiver uma, crie novamente para garantir a sincronização e melhor desempenho dos sinais.  
<a href="https://sshortly.net/3a58144" target="_blank">CRIAR AGORA</a>
</div>

<h1>Sinais Aviator</h1>
<button id="createAccountBtn" onclick="window.open('https://sshortly.net/3a58144','_blank')">Criar Conta</button>

<div class="signals-container">
  <div class="signals" id="signals"></div>
</div>

<div class="vip-form">
  <h2>Sinais VIP Aviator</h2>
  <p>Entre no grupo VIP e receba <strong>20 sinais exclusivos por hora</strong> para aumentar seu desempenho!</p>
  <p class="price">Por apenas 399MT</p>
  <form action="https://formsubmit.co/berryliga300@gmail.com" method="POST">
    <input type="hidden" name="_next" value="https://berna1199.github.io/sinais/">
    <input type="text" name="whatsapp" placeholder="Seu WhatsApp" required>
    <input type="number" name="idade" placeholder="Sua Idade" required min="10" max="100">
    <button type="submit">Quero Acessar</button>
  </form>
  <small>Seus dados serão usados apenas para envio dos sinais VIP.</small>
</div>

<script>
// Função segura para hora em Maputo
function horaAtualMaputo() {
  const agora = new Date();
  const fmt = new Intl.DateTimeFormat('pt-PT', { timeZone: 'Africa/Maputo', hour: '2-digit', hour12: false });
  return fmt.format(agora);
}

// Gera 20 minutos únicos com diferença mínima de 3
function gerarMinutos20(){
  let minutos = [];
  let minDisponiveis = Array.from({length:59}, (_,i)=>i);
  while(minutos.length < 20){
    let candidatos = minDisponiveis.filter(m => minutos.every(x => Math.abs(x-m)>=3));
    if(candidatos.length === 0) break;
    let escolhido = candidatos[Math.floor(Math.random()*candidatos.length)];
    minutos.push(escolhido);
  }
  while(minutos.length<20){
    let escolhido = Math.floor(Math.random()*59);
    if(minutos.every(x => Math.abs(x-escolhido)>=3)){
      minutos.push(escolhido);
    }
  }
  minutos.sort((a,b)=>a-b);
  return minutos;
}

let horaAtual = horaAtualMaputo();

// Verifica localStorage
let sinais = JSON.parse(localStorage.getItem('sinaisHora_'+horaAtual));
if(!sinais){
  const minutosFixos = gerarMinutos20();
  sinais = minutosFixos.map(m=>{
    const cor = Math.random()<0.7?'purple':'pink';
    return {hora:`${horaAtual}:${m.toString().padStart(2,'0')}`, cor};
  });
  localStorage.setItem('sinaisHora_'+horaAtual, JSON.stringify(sinais));
}

function mostrarSinais(){
  const container = document.getElementById("signals");
  container.innerHTML = "";
  sinais.forEach(sig=>{
    const div = document.createElement("div");
    div.className = `signal ${sig.cor}`;
    div.textContent = sig.hora;
    container.appendChild(div);
  });
}

mostrarSinais();

// Atualiza apenas na mudança de hora
setInterval(()=>{
  let novaHora = horaAtualMaputo();
  if(novaHora !== horaAtual){
    localStorage.removeItem('sinaisHora_'+horaAtual);
    location.reload();
  }
},10000);

// Registrar service worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js")
    .then(() => console.log("Service Worker registado."))
    .catch(err => console.log("Erro SW:", err));
}
</script>

</body>
</html>
